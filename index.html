<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BLOOM — Косметика нового поколения</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f1115;
      --card:#151823;
      --muted:#8ea0b2;
      --text:#e8edf2;
      --brand:#ff5bbd;
      --brand-2:#6ee7ff;
      --radius:16px;
      --gap:18px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --danger:#ff6b6b;
      --success:#22c55e;
      --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font:16px/1.55 Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1000px 600px at 10% -10%, #1b2030 0%, transparent 60%),
        radial-gradient(900px 600px at 120% 20%, #1a1f2d 0%, transparent 60%),
        var(--bg);
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}

    .container{max-width:1200px;margin:0 auto;padding:0 20px}
    .header{position:sticky;top:0;z-index:50;backdrop-filter:blur(10px);background:linear-gradient(180deg,rgba(15,17,21,.9),rgba(15,17,21,.6));border-bottom:1px solid #232739}
    .header-inner{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:14px 0}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.4px}
    .brand-badge{width:34px;height:34px;border-radius:10px;background: conic-gradient(from 120deg, var(--brand), var(--brand-2));box-shadow:0 0 0 4px #ffffff12,0 20px 40px #ff5bbd33}
    .nav{display:flex;gap:22px;align-items:center}
    .nav a{color:var(--muted);font-weight:600}
    .nav a.active,.nav a:hover{color:#fff}
    .cta{display:flex;gap:10px}
    .btn{padding:10px 16px;border-radius:12px;border:1px solid #2a3046;display:inline-flex;align-items:center;gap:8px;font-weight:700;cursor:pointer}
    .btn.block{display:flex;justify-content:center;width:100%}
    .btn.primary{background:linear-gradient(135deg,var(--brand),#ff7ad0 40%,#ffa1e2);color:#111;border:none;box-shadow:0 12px 30px #ff5bbd44, inset 0 0 0 1px #ffffff55}
    .btn.primary:hover{filter:brightness(1.03)}
    .btn.ghost:hover{background:#1b2133}
    .btn.danger{background:linear-gradient(135deg,#ff9aa5,#ff6b6b);color:#111;border:none}

    .pill{display:inline-flex;gap:8px;align-items:center;padding:8px 10px;border-radius:999px;border:1px solid #2a3046;background:#141a26;color:#cbd7e6;font-weight:700}

    .hero{padding:56px 0 36px; position:relative; overflow:hidden}
    .hero-inner{display:flex; gap:28px; align-items:stretch; justify-content:space-between;flex-wrap:wrap}
    .hero-copy{flex:1 1 420px; display:flex; flex-direction:column; gap:18px;padding:26px; border-radius:var(--radius);background:linear-gradient(180deg,#121623,#0f121c);border:1px solid #20263b; box-shadow:var(--shadow)}
    .eyebrow{display:inline-flex; gap:8px; align-items:center; color:var(--muted); font-weight:700; letter-spacing:.2px}
    .eyebrow .dot{width:8px;height:8px;border-radius:50%;background:linear-gradient(135deg,var(--brand-2),#88f);box-shadow:0 0 14px #6ee7ffaa}
    h1{margin:0;font-size:44px;line-height:1.1}
    .lead{color:#c9d4df}
    .hero-actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:6px}

    .hero-art{flex:1 1 420px; border-radius:22px; overflow:hidden; position:relative;border:1px solid #20263b; box-shadow:var(--shadow)}
    .hero-art img{width:100%;height:100%;object-fit:cover;display:block}
    .glass-badge{position:absolute;bottom:16px;left:16px;display:flex;gap:10px;align-items:center;padding:10px 14px;border-radius:14px;background:linear-gradient(180deg,#ffffff1f,#ffffff0a);border:1px solid #ffffff2d; backdrop-filter:blur(8px); color:#eef6ff;font-weight:700}

    .breadcrumbs{display:flex;gap:8px;align-items:center;color:#a9b7c8;font-size:14px;margin:8px 0 18px}
    .breadcrumbs a{color:#cfe1f8}

    .section{padding:26px 0}
    .chips{display:flex;gap:10px;flex-wrap:wrap}
    .chip{padding:8px 12px;border-radius:999px;border:1px solid #2b3147;color:#cbd7e6;background:#151a26; cursor:pointer; font-weight:600}
    .chip.active{background:linear-gradient(135deg,#222a3e,#1a2133); color:#fff;border-color:#3a4464; box-shadow:inset 0 0 0 1px #ffffff18}

    .catalog{display:flex;flex-wrap:wrap;gap:20px; margin-top:16px}
    .card{background:linear-gradient(180deg,#141827,#121522);border:1px solid #20263b;border-radius:18px;overflow:hidden;flex:1 1 calc(33.333% - 14px); min-width:270px; max-width:370px;display:flex;flex-direction:column; transition:.25s transform}
    .card:hover{transform:translateY(-4px)}
    .thumb{aspect-ratio: 4/3; background:#0b0d13; overflow:hidden; cursor:pointer}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block;filter:saturate(1.05)}
    .info{padding:14px 14px 16px; display:flex; flex-direction:column; gap:8px}
    .price-row{display:flex; align-items:center; justify-content:space-between}
    .price{font-weight:800;font-size:20px;background:linear-gradient(135deg,#fff,#bde6ff);-webkit-background-clip:text;color:transparent}
    .rating{color:#ffd166}
    .title{font-weight:700;cursor:pointer}
    .tags{display:flex;gap:6px;flex-wrap:wrap}
    .tag{font-size:12px;color:#a8b6c7;border:1px solid #2a3046;padding:4px 8px;border-radius:999px}
    .buy-row{margin-top:auto; display:flex; gap:10px}
    .btn.square{border-radius:12px;justify-content:center;flex:1}

    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:20px}
    .panel{background:linear-gradient(180deg,#141827,#121522);border:1px solid #20263b;border-radius:18px;padding:16px}
    .panel h3{margin:0 0 10px}

    .promo{margin-top:24px; border:1px dashed #334;border-radius:18px; padding:18px; display:flex; gap:16px; align-items:center;background:linear-gradient(90deg,#191e2c 0,#191d28 40%,#1a1d27 100%)}
    .promo .note{color:#c7d6e6}
    .badge{background:linear-gradient(135deg,var(--brand-2),#a7f3ff);color:#0d1320;font-weight:900;padding:8px 12px;border-radius:10px}

    .testimonials{display:flex;flex-wrap:wrap;gap:20px;margin-top:10px}
    .t-card{flex:1 1 320px; background:#141827;border:1px solid #20263b;border-radius:14px;padding:16px; display:flex; gap:12px; align-items:flex-start}
    .avatar{width:44px;height:44px;border-radius:50%;overflow:hidden;flex:none}

    .footer{padding:28px 0;color:#99a8b8}
    .footer .cols{display:flex;flex-wrap:wrap;gap:20px;justify-content:space-between}
    .col{flex:1 1 220px}
    .small{font-size:13px;color:#8fa1b3}

    .input, select, textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #2a3046;background:#121625;color:#e6eef8}
    .row{display:flex;gap:12px}

    .table{width:100%;border-collapse:collapse}
    .table th,.table td{padding:10px 8px;border-bottom:1px solid #2a3046}
    .table th{text-align:left;color:#9cb0c6;font-weight:700}

    .empty{padding:20px;border:1px dashed #334;border-radius:12px;color:#aab8c8}

    .toast{position:fixed;right:16px;bottom:16px;background:#131a27;border:1px solid #2a3046;border-radius:12px;padding:12px 14px;box-shadow:var(--shadow);display:none}

    @media (max-width: 1024px){h1{font-size:36px}.card{flex:1 1 calc(50% - 12px)}.grid{grid-template-columns:1fr}}
    @media (max-width: 680px){.nav{display:none}.hero-inner{gap:18px}h1{font-size:30px}.card{flex:1 1 100%}.cta{width:100%}.btn.primary, .btn.ghost{flex:1}}
  </style>
</head>
<body>
  <header class="header">
    <div class="container header-inner">
      <a class="brand" href="#/">
        <span class="brand-badge"></span>
        BLOOM Cosmetics
      </a>
      <nav class="nav" id="main-nav">
        <a href="#/catalog">Каталог</a>
        <a href="#/promo">Скидки</a>
        <a href="#/reviews">Отзывы</a>
        <a href="#/contacts">Контакты</a>
        <a href="#/support">Поддержка</a>
      </nav>
      <div class="cta">
        <a class="btn ghost" href="#/login" id="login-btn">Войти</a>
        <a class="btn primary" href="#/cart">Корзина (<span id="cart-count">0</span>)</a>
      </div>
    </div>
  </header>

  <main id="app">
    <!-- Контент роутера сюда -->
  </main>

  <footer class="footer">
    <div class="container cols">
      <div class="col">
        <a class="brand" href="#/"><span class="brand-badge"></span> BLOOM Cosmetics</a>
        <p class="small">Чистая красота без компромиссов. © 2025</p>
      </div>
      <div class="col">
        <div class="small">
          <a href="#/delivery">Доставка и оплата</a> ·
          <a href="#/returns">Возврат</a> ·
          <a href="#/privacy">Политика конфиденциальности</a>
        </div>
      </div>
      <div class="col" style="text-align:right">
        <a class="btn ghost" href="#/support">Поддержка</a>
      </div>
    </div>
  </footer>

  <div class="toast" id="toast"></div>

  <script>
    // ======= ДАННЫЕ =======
    const PRODUCTS = [
      {
        id: 'vitc-15',
        title: 'Сыворотка Vitamin C 15%',
        price: 29.90,
        rating: 5,
        category: 'Сыворотки',
        tags: ['brightening','vegan','fragrance-free'],
        image: 'https://images.unsplash.com/photo-1598440947619-2c35fc9aa908?q=80&w=1200&auto=format&fit=crop',
        desc: 'Антиоксидантная сыворотка с 15% стабильной формой витамина C. Осветляет и выравнивает тон кожи.',
        specs: ['pH 3.2–3.5','Без отдушек','Подходит беременным']
      },
      {
        id: 'hydro-ceramide',
        title: 'Гидрокрем с керамидами',
        price: 34.50,
        rating: 4,
        category: 'Кремы',
        tags: ['hydration','ceramides'],
        image: 'https://life-organic.ru/d/gidrofilnyj_korneokrem_hydrosoft_30_ml.jpg',
        desc: 'Плотный, но невесомый крем с 3 видами керамидов для восстановления барьера.',
        specs: ['Без эфирных масел','Клинически подтверждено']
      },
      {
        id: 'pha-3',
        title: 'Тоник PHA 3%',
        price: 19.90,
        rating: 5,
        category: 'Тоники',
        tags: ['gentle peel','pH 4.0'],
        image: 'https://avatars.mds.yandex.net/i?id=43ba795347ddf6ad97cde52b4856c9fa40b8adc7-8961610-images-thumbs&n=13',
        desc: 'Мягкое обновление без раздражения. Подходит для чувствительной кожи.',
        specs: ['PHA 3%','Без спирта']
      },
      {
        id: 'niacin-mask',
        title: 'Ночная маска с ниацинамидом',
        price: 24.90,
        rating: 4,
        category: 'Маски',
        tags: ['niacinamide','calming'],
        image: 'https://avatars.mds.yandex.net/i?id=afbf1af88d27e982eced4e261dce1ce2fbdd827c-11477006-images-thumbs&n=13',
        desc: 'Снимает покраснение и выравнивает текстуру за ночь.',
        specs: ['Ниацинамид 5%','Бета-глюкан']
      },
      {
        id: 'velvet-matte',
        title: 'Помада Velvet Matte',
        price: 14.90,
        rating: 5,
        category: 'Макияж',
        tags: ['makeup','longwear'],
        image: 'https://avatars.mds.yandex.net/i?id=620f1b2289c9ebcfe30e4328145f52e45e0b440c-5279699-images-thumbs&n=13',
        desc: 'Мягкий матовый финиш, комфорт без пересушивания, стойкость до 8 часов.',
        specs: ['Витамин E','Не отпечатывается']
      },
      {
        id: 'shampoo-vol',
        title: 'Шампунь volume+',
        price: 17.40,
        rating: 4,
        category: 'Hair',
        tags: ['haircare','sulfate-free'],
        image: 'https://images.unsplash.com/photo-1540555700478-4be289fbecef?q=80&w=1200&auto=format&fit=crop',
        desc: 'Объём от корней, бережное очищение без сульфатов.',
        specs: ['Без SLS/SLES','Подходит для окрашенных волос']
      }
    ];

    const PROMOS = [
      { id:'glow-kit', title:'Набор «Glow Kit»', desc:'Очищение + сыворотка + крем. Скидка действует до конца недели.', badge:'-25%', href:'#/promo' }
    ];

    // Отзывы (данные для страницы)
    const TESTIMONIALS = [
      { name:'Алёна',   text:'Лучший крем для моей сухой кожи! Без отдушек, впитывается мгновенно.', avatar:'https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=400&auto=format&fit=crop' },
      { name:'Павел',   text:'Сыворотка с витамином C реально подсветляет тон за пару недель.', avatar:'https://images.unsplash.com/photo-1547425260-76bcadfb4f2c?q=80&w=400&auto=format&fit=crop' },
      { name:'Данила',  text:'Доставка быстрая, упаковка огонь. Возьму ещё набор для мамы.', avatar:'https://images.unsplash.com/photo-1541534401786-2077eed87a74?q=80&w=400&auto=format&fit=crop' }
    ];



    // ======= УТИЛИТЫ =======
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
    const fmtPrice = n => new Intl.NumberFormat('ru-RU', {style:'currency', currency:'RUB'}).format(n);

    const storage = {
      get(key, def){ try { return JSON.parse(localStorage.getItem(key)) ?? def } catch { return def }},
      set(key, val){ localStorage.setItem(key, JSON.stringify(val)) }
    }

    function toast(msg, t=1800){
      const el = $('#toast');
      el.textContent = msg; el.style.display='block';
      setTimeout(()=> el.style.display='none', t);
    }

    // ======= КОРЗИНА =======
    function getCart(){ return storage.get('cart', []) }
    function setCart(items){ storage.set('cart', items); updateCartCount() }
    function addToCart(id, qty=1){
      const items = getCart();
      const it = items.find(i=>i.id===id);
      if(it) it.qty += qty; else items.push({id, qty});
      setCart(items); toast('Добавлено в корзину');
    }
    function updateCartCount(){
      const c = getCart().reduce((s,i)=>s+i.qty,0);
      $('#cart-count').textContent = c;
    }
    function removeFromCart(id){ setCart(getCart().filter(i=>i.id!==id)); }
    function changeQty(id, qty){ setCart(getCart().map(i=> i.id===id? {...i, qty:Math.max(1, qty)} : i)); }

    // ======= ПСЕВДО-АВТОРИЗАЦИЯ =======
    function getUser(){ return storage.get('user', null) }
    function setUser(u){ storage.set('user', u); renderHeaderUser() }
    function logout(){ localStorage.removeItem('user'); renderHeaderUser(); toast('Вы вышли из аккаунта') }

    function renderHeaderUser(){
      const u = getUser();
      const btn = $('#login-btn');
      if(u){ btn.textContent = `Привет, ${u.name}`; btn.href = '#/account'; }
      else { btn.textContent = 'Войти'; btn.href = '#/login'; }
    }

    // ======= РОУТЕР =======
    const routes = {};
    function route(path, handler){ routes[path] = handler }

    function parseLocation(){
      const hash = location.hash || '#/';
      const [path, query=''] = hash.replace('#','').split('?');
      return { path, query: Object.fromEntries(new URLSearchParams(query)) };
    }

    function navigate(to){ location.hash = to }

    function router(){
      const {path} = parseLocation();
      const app = $('#app');
      const match = Object.keys(routes).find(r => r===path || (r.includes(':id') && path.startsWith(r.split(':id')[0])));
      if(!match){ navigate('#/'); return }
      app.innerHTML = routes[match](path);
      // активная ссылка
      $$('#main-nav a').forEach(a=> a.classList.toggle('active', a.getAttribute('href')===`#${path}`));
      // делегирование кликов
      attachInteractions(app);
      updateCartCount();
      renderHeaderUser();
    }

    window.addEventListener('hashchange', router);
    window.addEventListener('load', ()=>{ updateCartCount(); renderHeaderUser(); router(); });

    // ======= ВЬЮШКИ =======
    const Home = () => `
      <section class="hero">
        <div class="container hero-inner">
          <div class="hero-copy">
            <div class="eyebrow"><span class="dot"></span> Новая коллекция весна/лето</div>
            <h1>Чистая формула. Яркий результат.<br/>Косметика нового поколения.</h1>
            <p class="lead">Веганские ингредиенты, клинически доказанная эффективность и устойчивые упаковки. Собери уход под себя.</p>
            <div class="hero-actions">
              <a class="btn primary" href="#/catalog">Купить сейчас</a>
              <a class="btn ghost" href="#/promo">Смотреть акции</a>
            </div>
          </div>
          <figure class="hero-art">
            <img src="https://d2j6dbq0eux0bg.cloudfront.net/images/36341328/3510783605.jpg" alt="Косметика">
            <figcaption class="glass-badge">−20% на наборы · только до воскресенья</figcaption>
          </figure>
        </div>
      </section>

      <section class="section">
        <div class="container">
          <div class="chips" id="chips">
            ${['Все','Очищение','Тоники','Сыворотки','Кремы','Макияж','Hair'].map((c,i)=>`<button class="chip ${i===0?'active':''}" data-filter="${c}">${c}</button>`).join('')}
          </div>
        </div>
      </section>

      ${Catalog(true)}

      <section id="promo" class="section">
        <div class="container promo">
          <span class="badge">-25%</span>
          <div class="note"><strong>Набор «Glow Kit»</strong> — очищение + сыворотка + крем. Скидка действует до конца недели.</div>
          <a class="btn primary" href="#/promo">Забрать выгоду</a>
        </div>
      </section>

      <section id="reviews" class="section">
        <div class="container testimonials">
          ${TESTIMONIALS.map(t=>`
            <div class=\"t-card\">
              <div class=\"avatar\"><img src=\"${t.avatar}\" alt=\"\"></div>
              <div><strong>${t.name}</strong> ${t.text}</div>
            </div>`).join('')}
        </div>
      </section>`;

    function Catalog(inHome=false){
      return `
      <section id="catalog" class="section">
        <div class="container">
          ${inHome? '' : '<div class="breadcrumbs"><a href=\"#/\">Главная</a> / Каталог</div>'}
          <div class="catalog">
            ${PRODUCTS.map(p=> Card(p)).join('')}
          </div>
        </div>
      </section>`
    }

    function Card(p){
      return `<article class="card" data-id="${p.id}">
        <div class="thumb" data-goto="#/product/${p.id}"><img src="${p.image}" alt="${p.title}"></div>
        <div class="info">
          <div class="price-row">
            <a class="title" href="#/product/${p.id}">${p.title}</a>
            <span class="price">${fmtPrice(p.price)}</span>
          </div>
          <div class="rating">${'★'.repeat(p.rating)}${'☆'.repeat(5-p.rating)}</div>
          <div class="tags">${p.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
          <div class="buy-row">
            <button class="btn square ghost" data-add="${p.id}">В корзину</button>
            <a class="btn square primary" href="#/product/${p.id}">Купить</a>
          </div>
        </div>
      </article>`
    }

    const Product = (path) => {
      const id = path.split('/').pop();
      const p = PRODUCTS.find(x=>x.id===id);
      if(!p) return `<div class="container section"><div class="empty">Товар не найден</div></div>`;
      return `
      <section class="section">
        <div class="container">
          <div class="breadcrumbs"><a href="#/">Главная</a> / <a href="#/catalog">Каталог</a> / ${p.title}</div>
          <div class="grid">
            <div class="panel">
              <img src="${p.image}" alt="${p.title}" style="border-radius:14px">
            </div>
            <div class="panel">
              <h2 style="margin:0 0 6px">${p.title}</h2>
              <div class="pill">Рейтинг: ${'★'.repeat(p.rating)}${'☆'.repeat(5-p.rating)}</div>
              <p style="color:#cfe1f8">${p.desc}</p>
              <ul>${p.specs.map(s=>`<li>${s}</li>`).join('')}</ul>
              <div class="price-row" style="margin:12px 0 16px">
                <strong class="price" style="font-size:28px">${fmtPrice(p.price)}</strong>
                <div class="row">
                  <input type="number" min="1" value="1" class="input" style="width:90px" id="qty">
                  <button class="btn primary" data-add="${p.id}" id="add-btn">Добавить в корзину</button>
                </div>
              </div>
              <div class="chips">${p.tags.map(t=>`<span class="chip">${t}</span>`).join('')}</div>
            </div>
          </div>
          <div class="panel" style="margin-top:16px">
            <h3>Рекомендации</h3>
            <div class="catalog">${PRODUCTS.filter(x=>x.id!==p.id).slice(0,3).map(Card).join('')}</div>
          </div>
        </div>
      </section>`
    }

    const Cart = () => {
      const items = getCart().map(i=> ({...i, data: PRODUCTS.find(p=>p.id===i.id)})).filter(i=>i.data);
      const subtotal = items.reduce((s,i)=> s + i.data.price*i.qty, 0);
      const discount = 0; // можно расширить на промокоды
      const total = subtotal - discount;
      return `
      <section class="section">
        <div class="container">
          <div class="breadcrumbs"><a href="#/">Главная</a> / Корзина</div>
          <div class="grid">
            <div class="panel">
              <h3>Товары</h3>
              ${items.length? `
              <table class="table">
                <thead><tr><th>Товар</th><th>Цена</th><th>Кол-во</th><th>Сумма</th><th></th></tr></thead>
                <tbody>
                  ${items.map(i=>`<tr>
                    <td><a href="#/product/${i.data.id}">${i.data.title}</a></td>
                    <td>${fmtPrice(i.data.price)}</td>
                    <td><input class="input qty" type="number" min="1" value="${i.qty}" data-id="${i.data.id}" style="width:90px"></td>
                    <td>${fmtPrice(i.data.price*i.qty)}</td>
                    <td><button class="btn danger" data-del="${i.data.id}">Удалить</button></td>
                  </tr>`).join('')}
                </tbody>
              </table>` : `<div class="empty">Ваша корзина пуста. <a href="#/catalog">Перейти в каталог</a></div>`}
            </div>
            <div class="panel">
              <h3>Итого</h3>
              <div class="row" style="justify-content:space-between"><span>Подытог</span><strong>${fmtPrice(subtotal)}</strong></div>
              <div class="row" style="justify-content:space-between"><span>Скидка</span><strong>${fmtPrice(discount)}</strong></div>
              <hr style="border:none;border-top:1px solid #2a3046;margin:12px 0">
              <div class="row" style="justify-content:space-between"><span>К оплате</span><strong class="price">${fmtPrice(total)}</strong></div>
              <div style="height:8px"></div>
              <input class="input" placeholder="Промокод (например: GLOW25)" id="promo-input">
              <div style="height:8px"></div>
              <button class="btn primary block" id="checkout">Оформить заказ</button>
              <p class="small" style="margin-top:8px">Нажимая, вы соглашаетесь с <a href="#/privacy">политикой</a>.</p>
            </div>
          </div>
        </div>
      </section>`
    }

    const Promo = () => `
      <section class="section">
        <div class="container">
          <div class="breadcrumbs"><a href="#/">Главная</a> / Скидки</div>
          <div class="promo"><span class="badge">-25%</span><div class="note"><strong>${PROMOS[0].title}</strong> — ${PROMOS[0].desc}</div><a class="btn primary" href="#/catalog">В каталог</a></div>
          <div class="panel" style="margin-top:16px"><h3>Условия акции</h3><ul><li>Скидка применяется в корзине по промокоду <strong>GLOW25</strong>.</li><li>Срок действия — до воскресенья.</li><li>Количество наборов ограничено.</li></ul></div>
        </div>
      </section>`

    const Reviews = () => `
      <section class="section">
        <div class="container">
          <div class="breadcrumbs"><a href="#/">Главная</a> / Отзывы</div>
          <div class="testimonials">
            ${TESTIMONIALS.map(t=>`
              <div class=\"t-card\">
                <div class=\"avatar\"><img src=\"${t.avatar}\" alt=\"\"></div>
                <div><strong>${t.name}</strong> ${t.text}</div>
              </div>`).join('')}
          </div>
          <div class="panel" style="margin-top:16px">
            <h3>Оставить отзыв</h3>
            <div class="row"><input class="input" id="rv-name" placeholder="Ваше имя"><input class="input" id="rv-prod" placeholder="Товар (необязательно)"></div>
            <textarea class="input" id="rv-text" placeholder="Ваше впечатление" rows="4"></textarea>
            <div style="height:8px"></div>
            <button class="btn primary" id="send-review">Отправить</button>
          </div>
        </div>
      </section>`

    const Contacts = () => `
      <section class="section">
        <div class="container">
          <div class="breadcrumbs"><a href="#/">Главная</a> / Контакты</div>
          <div class="grid">
            <div class="panel"><h3>Как с нами связаться</h3>
              <p class="small">Email: <a href="mailto:support@bloom.example">support@bloom.example</a><br>Телефон: <a href="tel:+78002000000">+7 (800) 200-00-00</a><br>График: Пн–Пт 10:00–19:00</p>
              <div class="promo"><span class="badge">FAQ</span><div class="note">Ищете быстрый ответ? Загляните в <a href="#/support">центр поддержки</a>.</div></div>
            </div>
            <div class="panel"><h3>Напишите нам</h3>
              <input class="input" id="c-name" placeholder="Имя">
              <div style="height:8px"></div>
              <input class="input" id="c-email" placeholder="Email">
              <div style="height:8px"></div>
              <textarea class="input" id="c-msg" rows="4" placeholder="Сообщение"></textarea>
              <div style="height:8px"></div>
              <button class="btn primary" id="send-contact">Отправить</button>
            </div>
          </div>
        </div>
      </section>`

    const Support = () => `
      <section class="section">
        <div class="container">
          <div class="breadcrumbs"><a href="#/">Главная</a> / Поддержка</div>
          <div class="panel"><h3>Центр поддержки</h3>
            <details open><summary><strong>Доставка и сроки</strong></summary><p class="small">По России 2–5 дней. Международная 7–14 дней. Трек-код приходит на email.</p></details>
            <details><summary><strong>Оплата</strong></summary><p class="small">Карта, СБП, PayPal. Чеки отправляются на email.</p></details>
            <details><summary><strong>Возврат</strong></summary><p class="small">14 дней на возврат при сохранении товарного вида. <a href="#/returns">Узнать больше</a>.</p></details>
          </div>
          <div class="panel" style="margin-top:16px">
            <h3>Заявка</h3>
            <div class="row"><input class="input" id="s-email" placeholder="Ваш email"><select class="input" id="s-topic"><option>Вопрос по заказу</option><option>Техническая проблема</option><option>Предложение</option></select></div>
            <textarea class="input" id="s-text" rows="4" placeholder="Опишите ситуацию"></textarea>
            <div style="height:8px"></div>
            <button class="btn primary" id="send-support">Отправить</button>
          </div>
        </div>
      </section>`

    const Login = () => `
      <section class="section">
        <div class="container">
          <div class="breadcrumbs"><a href="#/">Главная</a> / Вход</div>
          <div class="grid">
            <div class="panel">
              <h3>Войти</h3>
              <input class="input" id="l-email" placeholder="Email">
              <div style="height:8px"></div>
              <input class="input" id="l-name" placeholder="Имя">
              <div style="height:8px"></div>
              <button class="btn primary" id="do-login">Продолжить</button>
              <p class="small" style="margin-top:8px">Без пароля: сразу создадим аккаунт и залогиним.</p>
            </div>
            <div class="panel">
              <h3>Преимущества аккаунта</h3>
              <ul><li>Отслеживание заказов</li><li>История покупок</li><li>Скидки для участников</li></ul>
            </div>
          </div>
        </div>
      </section>`

    const Account = () => {
      const u = getUser();
      return `
      <section class="section"><div class="container">
        <div class="breadcrumbs"><a href="#/">Главная</a> / Аккаунт</div>
        <div class="panel"><h3>Профиль</h3>
          ${u? `<p>Имя: <strong>${u.name}</strong><br>Email: <strong>${u.email}</strong></p>` : '<p>Вы не авторизованы.</p>'}
          <div class="row"><a class="btn ghost" href="#/">На главную</a><button class="btn danger" id="do-logout">Выйти</button></div>
        </div>
      </div></section>`
    }

    const Delivery = () => `
      <section class="section"><div class="container">
        <div class="breadcrumbs"><a href="#/">Главная</a> / Доставка и оплата</div>
        <div class="panel"><h3>Доставка</h3><ul><li>Курьером: 2–5 дней</li><li>Почта: 3–7 дней</li><li>Международная: 7–14 дней</li></ul></div>
        <div class="panel" style="margin-top:12px"><h3>Оплата</h3><ul><li>Банковские карты</li><li>СБП</li><li>PayPal</li></ul></div>
      </div></section>`

    const Returns = () => `
      <section class="section"><div class="container">
        <div class="breadcrumbs"><a href="#/">Главная</a> / Возврат</div>
        <div class="panel"><h3>Условия возврата</h3><ol><li>14 дней с момента получения.</li><li>Сохранность упаковки и содержимого.</li><li>Деньги вернём тем же способом оплаты.</li></ol></div>
      </div></section>`

    const Privacy = () => `
      <section class="section"><div class="container">
        <div class="breadcrumbs"><a href="#/">Главная</a> / Политика конфиденциальности</div>
        <div class="panel"><h3>Политика</h3><p class="small">Мы уважаем вашу приватность и обрабатываем данные согласно GDPR. Email используется для уведомлений о заказах и индивидуальных предложений с вашим согласия.</p></div>
      </div></section>`

    // ======= РЕГИСТРАЦИЯ РОУТОВ =======
    route('/'         , Home);
    route('/catalog'  , () => Catalog(false));
    route('/product/:id', Product);
    route('/cart'     , Cart);
    route('/promo'    , Promo);
    route('/reviews'  , Reviews);
    route('/contacts' , Contacts);
    route('/support'  , Support);
    route('/login'    , Login);
    route('/account'  , Account);
    route('/delivery' , Delivery);
    route('/returns'  , Returns);
    route('/privacy'  , Privacy);

    // ======= ИНТЕРАКЦИИ =======
    function attachInteractions(root=document){
      // добавление в корзину
      $$('[data-add]', root).forEach(btn=> btn.addEventListener('click', (e)=>{
        const id = e.currentTarget.getAttribute('data-add');
        const qtyInput = $('#qty', root);
        const qty = qtyInput? parseInt(qtyInput.value||'1') : 1;
        addToCart(id, qty);
      }));

      // удалить из корзины
      $$('[data-del]', root).forEach(btn=> btn.addEventListener('click', (e)=>{
        removeFromCart(e.currentTarget.getAttribute('data-del'));
        router();
      }));

      // изменить количество
      $$('.qty', root).forEach(inp=> inp.addEventListener('change', (e)=>{
        const id = e.currentTarget.getAttribute('data-id');
        changeQty(id, parseInt(e.currentTarget.value||'1'));
        router();
      }));

      // промокод
      const promo = $('#promo-input', root);
      if(promo){ promo.addEventListener('change', ()=>{
        if(promo.value.trim().toUpperCase()==='GLOW25') toast('Промокод применён: -25% (демо)');
        else toast('Промокод не найден');
      })}

      // фильтры на главной
      const chips = $('#chips', root);
      if(chips){ chips.addEventListener('click', (e)=>{
        const btn = e.target.closest('.chip'); if(!btn) return;
        $$('.chip', chips).forEach(c=>c.classList.remove('active')); btn.classList.add('active');
        const f = btn.dataset.filter;
        $$('.card').forEach(card=>{
          const id = card.getAttribute('data-id');
          const p = PRODUCTS.find(x=>x.id===id);
          const show = (f==='Все') || p.category===f || p.tags.some(t=>t.toLowerCase()===f.toLowerCase());
          card.style.display = show? '' : 'none';
        })
      })}

      // отправка форм
      $('#send-contact', root)?.addEventListener('click', ()=>{ toast('Сообщение отправлено!'); navigate('#/');});
      $('#send-support', root)?.addEventListener('click', ()=>{ toast('Заявка отправлена!'); });
      $('#send-review', root)?.addEventListener('click', ()=>{ toast('Спасибо за отзыв!'); });

      // логин / логаут
      $('#do-login', root)?.addEventListener('click', ()=>{
        const email = $('#l-email').value.trim();
        const name = $('#l-name').value.trim() || 'Гость';
        if(!email){ toast('Введите email'); return }
        setUser({email, name}); toast('Добро пожаловать!'); navigate('#/account');
      });
      $('#do-logout', root)?.addEventListener('click', ()=>{ logout(); navigate('#/'); });

      // чекаут
      $('#checkout', root)?.addEventListener('click', ()=>{
        if(getCart().length===0){ toast('Корзина пуста'); return }
        toast('Заказ оформлен! (демо)'); setCart([]); navigate('#/');
      });

      // делегируем клики по миниатюрам
      $$('[data-goto]', root).forEach(el => el.addEventListener('click', e=> navigate(e.currentTarget.getAttribute('data-goto'))));
    }
  </script>
</body>
</html>
